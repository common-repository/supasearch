{"version":3,"sources":["supasearch-admin.js"],"names":["$","getDisplay","value","type","getValue","setValue","sliderInit","$slider","$handle","data","$value","slider","val","min","max","step","create","text","slide","event","ui","handle","each","i","el","jQuery","$button","$progress","$progressBar","$progressBarFill","progressMessage","unexpectedError","syncInProgress","updateProgress","message","percentage","html","hide","attr","width","show","callDbSync","offset","ajax","url","supasearch_sync_offset","success","response","status","progress","error","errorMessage","responseText","statusText","on"],"mappings":"CAAA,SAAWA,GACP,YAEAA,GAAE,WACE,GAAIC,GAAa,SAAUC,EAAOC,GAC1B,MAAgB,eAATA,EAAwBD,EAAQ,IAAMA,GAEjDE,EAAW,SAAUF,EAAOC,GACxB,MAAgB,eAATA,EAAwBD,EAAQ,IAAMA,GAEjDG,EAAW,SAAUH,EAAOC,GACxB,MAAgB,eAATA,EAAgC,IAARD,EAAcA,GAEjDI,EAAa,SAAUC,GAEnB,GAAIC,GAAUR,EAAE,IAAMO,EAAQE,KAAK,QAAU,mBACzCC,EAASV,EAAE,IAAMO,EAAQE,KAAK,QAGlCF,GAAQI,QACJT,MAAOG,EAASK,EAAOE,MAAOJ,EAAQC,KAAK,SAC3CI,IAAK,EACLC,IAAK,GACLC,KAAM,EACNC,OAAQ,WACJR,EAAQS,KAAKhB,EAAWM,EAAQI,OAAO,SAAUH,EAAQC,KAAK,UAC9DC,EAAOE,IAAIR,EAASG,EAAQI,OAAO,SAAUH,EAAQC,KAAK,WAE9DS,MAAO,SAAUC,EAAOC,GACpBZ,EAAQS,KAAKhB,EAAWmB,EAAGlB,MAAOF,EAAEoB,EAAGC,QAAQZ,KAAK,UACpDC,EAAOE,IAAIR,EAASgB,EAAGlB,MAAOF,EAAEoB,EAAGC,QAAQZ,KAAK,aAMhET,GAAE,sBAAsBsB,KAAK,SAAUC,EAAGC,GACtClB,EAAWN,EAAEwB,SAItBC,QACH,SAAWzB,GACP,YAEAA,GAAE,WACE,GAAI0B,GAAU1B,EAAE,uBACZ2B,EAAY3B,EAAE,gCACd4B,EAAe5B,EAAE,oCACjB6B,EAAmB7B,EAAE,yCACrB8B,EAAkB,0DAClBC,EAAkB,gCAClBC,GAAiB,EACjBC,EAAiB,SAAUC,EAASC,GAEhCR,EAAUS,KAAKF,GAAW,IAGA,mBAAfC,IACPP,EAAaS,OAAOC,KAAK,gBAAiB,MAC1CT,EAAiBU,MAAM,QAEvBX,EAAaY,OAAOF,KAAK,gBAAiBH,EAAa,KACvDN,EAAiBU,MAAMJ,EAAa,OAG5CM,EAAa,SAAUC,GACnB1C,EAAE2C,MACEC,IAAK,6DACLnC,MACIoC,uBAA0BH,GAE9BI,QAAS,SAAUC,GACgB,mBAApBA,GAASC,QAA8C,YAApBD,EAASC,OAK/CD,EAASE,SAASd,WAAa,KAE/BF,EAAeH,EAAiBiB,EAASE,SAASd,YAElDM,EAAWM,EAASE,SAASP,UAG7BT,EAAe,kCAAmCc,EAASE,SAASd,YAEpEH,GAAiB,IAIrBC,EAAeF,GAEfC,GAAiB,IAGzBkB,MAAO,SAAUH,GAEb,GAAII,GAAeJ,EAASK,aAAeL,EAASK,aAAeL,EAASM,WAAaN,EAASM,WAAatB,CAE/GE,GAAekB,GAEfnB,GAAiB,KAKjCN,GAAQ4B,GAAG,QAAS,WAEZtB,KAAmB,IAEnBA,GAAiB,EAEjBC,EAAeH,EAAiB,GAEhCW,EAAW,SAKxBhB","file":"supasearch-admin.js","sourcesContent":["(function( $ ) {\n    'use strict';\n\n    $(function() {\n        var getDisplay = function( value, type ) {\n                return type === 'percentage' ? value + '%' : value;\n            },\n            getValue = function( value, type ) {\n                return type === 'percentage' ? value / 100 : value;\n            },\n            setValue = function( value, type ) {\n                return type === 'percentage' ? value * 100 : value;\n            },\n            sliderInit = function( $slider ) {\n                // Get handle and hidden\n                var $handle = $('#' + $slider.data('name') + '-slider__handle'),\n                    $value = $('#' + $slider.data('name'));\n\n                //noinspection JSUnusedGlobalSymbols\n                $slider.slider({\n                    value: setValue($value.val(), $handle.data('type')),\n                    min: 1,\n                    max: 99,\n                    step: 1,\n                    create: function() {\n                        $handle.text(getDisplay($slider.slider('value'), $handle.data('type')));\n                        $value.val(getValue($slider.slider('value'), $handle.data('type')));\n                    },\n                    slide: function( event, ui ) {\n                        $handle.text(getDisplay(ui.value, $(ui.handle).data('type')));\n                        $value.val(getValue(ui.value, $(ui.handle).data('type')));\n                    }\n                });\n            };\n\n        // Create sliders\n        $('.supasearch-slider').each(function( i, el ) {\n            sliderInit($(el));\n        });\n    });\n\n})(jQuery);\n(function( $ ) {\n    'use strict';\n\n    $(function() {\n        var $button = $('#supasearch_db_sync'),\n            $progress = $('#supasearch_db_sync_progress'),\n            $progressBar = $('#supasearch_db_sync_progress_bar'),\n            $progressBarFill = $('#supasearch_db_sync_progress_bar_fill'),\n            progressMessage = 'DO NOT LEAVE PAGE. Database content sync in progress...',\n            unexpectedError = 'An unexpected error occurred!',\n            syncInProgress = false,\n            updateProgress = function( message, percentage ) {\n                // Update Text\n                $progress.html(message || '');\n\n                // Update progress bar with passed percentage\n                if( typeof percentage === 'undefined' ) {\n                    $progressBar.hide().attr('data-progress', '0%');\n                    $progressBarFill.width('0%');\n                } else {\n                    $progressBar.show().attr('data-progress', percentage + '%');\n                    $progressBarFill.width(percentage + '%');\n                }\n            },\n            callDbSync = function( offset ) {\n                $.ajax({\n                    url: '/wp-admin/admin-ajax.php?action=supasearch_db_content_sync',\n                    data: {\n                        \"supasearch_sync_offset\": offset\n                    },\n                    success: function( response ) {\n                        if( typeof response.status !== 'undefined' && response.status === 'success' ) {\n                            /** @property {int} response.progress.percentage */\n                            /** @property {int} response.progress.offset */\n\n                            // If progress percentage is less then 100% then recursively call sync with new offset\n                            if( response.progress.percentage < 100 ) {\n                                // Update progress\n                                updateProgress(progressMessage, response.progress.percentage);\n                                // Call sync with new offset\n                                callDbSync(response.progress.offset);\n                            } else {\n                                // Update process to show sync is complete\n                                updateProgress('Database content sync complete.', response.progress.percentage);\n                                // Sync complete so set in progress flag to false\n                                syncInProgress = false;\n                            }\n                        } else {\n                            // Update text to alert user that an error occurred\n                            updateProgress(unexpectedError);\n                            // Sync returned an error and stopped so set in progress flag to false\n                            syncInProgress = false;\n                        }\n                    },\n                    error: function( response ) {\n                        // Set error message\n                        var errorMessage = response.responseText ? response.responseText : response.statusText ? response.statusText : unexpectedError;\n                        // Update text to alert user that an error occurred\n                        updateProgress(errorMessage);\n                        // Sync returned an error and stopped so set in progress flag to false\n                        syncInProgress = false;\n                    }\n                });\n            };\n\n        $button.on('click', function() {\n            // Return if in progress\n            if( syncInProgress === false ) {\n                // Set in progress flag\n                syncInProgress = true;\n                // Update progress message and bar\n                updateProgress(progressMessage, 0);\n                // Start sync\n                callDbSync(0);\n            }\n        });\n    });\n\n})(jQuery);"],"sourceRoot":"/source/"}